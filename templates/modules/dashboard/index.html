{% extends 'layout/admin.html' %} {% block content %}
<div class="p-6 bg-gray-50 min-h-screen">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Dashboard</h1>
    <p class="text-gray-600">Resumen general de {{request.session.user_tienda_nombre}}</p>
  </div>
  <!-- Ventas del mes -->
  <div
    class="bg-blue-900 p-8 rounded-2xl shadow-lg mb-10 relative overflow-hidden"
  >
    <div class="relative">
      <div class="flex items-center justify-between">
        <div>
          <div class="flex items-center mb-3">
            <p class="text-blue-100 text-sm font-medium">
              Total ingresos del mes
            </p>
          </div>
          <h2 class="text-4xl font-bold text-white mb-2">
            Bs {{ total_ventas_mes|default:"0.00" }}
          </h2>
          <div class="flex items-center text-blue-100 text-sm">
            <svg
              class="w-4 h-4 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            {{ now|date:"F Y" }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Cards resumen -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
    <!-- Celulares disponibles -->
    <div
      class="group bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-blue-200 transition-all duration-300 relative overflow-hidden"
    >
      <div class="relative">
        <div class="flex items-start justify-between mb-4">
          <div
            class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
          >
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
              <line x1="12" y1="18" x2="12.01" y2="18"></line>
            </svg>
          </div>
          <div
            class="text-blue-500 opacity-20 group-hover:opacity-40 transition-opacity duration-300"
          >
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
              <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
              <line x1="12" y1="18" x2="12.01" y2="18"></line>
            </svg>
          </div>
        </div>
        <p class="text-sm font-medium text-gray-500 mb-1">
          Celulares disponibles
        </p>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">
          {{ total_celulares }}
        </h3>
        <div class="flex items-center text-xs">
          <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
          <span class="text-gray-500">En inventario</span>
        </div>
      </div>
    </div>

    <!-- Clientes registrados -->
    <div
      class="group bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-green-200 transition-all duration-300 relative overflow-hidden"
    >
      <div class="relative">
        <div class="flex items-start justify-between mb-4">
          <div
            class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
          >
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
          <div
            class="text-green-500 opacity-20 group-hover:opacity-40 transition-opacity duration-300"
          >
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
        </div>
        <p class="text-sm font-medium text-gray-500 mb-1">
          Clientes registrados
        </p>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">
          {{ total_clientes }}
        </h3>
        <div class="flex items-center text-xs">
          <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
          <span class="text-gray-500">Usuarios activos</span>
        </div>
      </div>
    </div>

    <!-- Vendedores -->
    <div
      class="group bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-purple-200 transition-all duration-300 relative overflow-hidden"
    >
      <div class="relative">
        <div class="flex items-start justify-between mb-4">
          <div
            class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
          >
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <polyline points="16,11 18,13 22,9"></polyline>
            </svg>
          </div>
          <div
            class="text-purple-500 opacity-20 group-hover:opacity-40 transition-opacity duration-300"
          >
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <polyline points="16,11 18,13 22,9"></polyline>
            </svg>
          </div>
        </div>
        <p class="text-sm font-medium text-gray-500 mb-1">Vendedores</p>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">
          {{ total_vendedores }}
        </h3>
        <div class="flex items-center text-xs">
          <div class="w-2 h-2 bg-purple-500 rounded-full mr-2"></div>
          <span class="text-gray-500">Equipo de ventas</span>
        </div>
      </div>
    </div>

    <!-- Total de ventas -->
    <div
      class="group bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg hover:border-orange-200 transition-all duration-300 relative overflow-hidden"
    >
      <div class="relative">
        <div class="flex items-start justify-between mb-4">
          <div
            class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
          >
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path
                d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
              ></path>
            </svg>
          </div>
          <div
            class="text-orange-500 opacity-20 group-hover:opacity-40 transition-opacity duration-300"
          >
            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path
                d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
              ></path>
            </svg>
          </div>
        </div>
        <p class="text-sm font-medium text-gray-500 mb-1">Total de ventas</p>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">
          {{ total_ventas }}
        </h3>
        <div class="flex items-center text-xs">
          <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
          <span class="text-gray-500">Transacciones</span>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('ventasPorMes').getContext('2d');
  const ventasPorMes = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: {{ meses_labels|safe }},
      datasets: [{
        label: 'Ventas por mes',
        data: {{ ventas_mensuales|safe }},
        backgroundColor: 'rgba(59, 130, 246, 0.1)',
        borderColor: 'rgba(59, 130, 246, 1)',
        borderWidth: 2,
        borderRadius: 8,
        borderSkipped: false,
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          grid: {
            color: 'rgba(0, 0, 0, 0.05)',
            drawBorder: false
          },
          ticks: {
            color: '#6B7280',
            font: {
              size: 12
            }
          }
        },
        x: {
          grid: {
            display: false
          },
          ticks: {
            color: '#6B7280',
            font: {
              size: 12
            }
          }
        }
      }
    }
  });
</script>
{% endblock %}
